<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danh
    </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>
<style>
  
   #color{
    background-color: rgb(142, 22, 170) ;
   }
 #head{
    margin: auto;
    text-align: center;
    max-width: 100%;
    background-color: rgb(77, 2, 114);
 }
 h1{
    color: rgb(207, 197, 211);
 }
 #conten{
    max-width: 100%;
 }

body{
    background-color: rgb(214, 164, 218);
}
#left{
    float: left;
}
form{
    margin-top: 50px;
    margin-bottom: 15;
    display: flex;
    justify-content: space-between;
}
#right{
    float: right;
    padding-right: 100px;

   
}

#clear{
    clear: both;
}
</style>
<body>
    <div id="head">
       <h1>Danh sách các học viên mới khóa 14 chương trình đào tạo kĩ sư công nghệ IBS</h1>
    </div>
    <div id="conten">
       
        <h2> Phần ghi thông tin </h2>
       
        <form>
           
            <div id="left">
        <table> 
            <tr>
                <td><label for="">Mã sinh viên</label></td>
                <td><input type="Number" id="id" placeholder="Mời nhập Mã sinh viên  "></td>
            </tr>
              <tr>
                <td> <label for="">Họ và tên </label></td>
                <td><input type="text" id="name" placeholder="Mời nhập tên "></td>
              </tr>
            <tr>
                <td><label for="">Tuổi</label></td>
                <td> <input type="Number" id="age" placeholder="Mời nhập tuổi "></td>
            </tr>
            <tr>
             <tr>
                <td><label for="">Email</label></td>
                <td> <input type="email" id="email" placeholder="Mời nhập email "></td>
            </tr>
                <td><label for="">Lớp</label></td>
                <td><select id="class">
                    <option value="">-chọn lớp -</option>
                    <option value="IBSK1D1">IBSK1D1</option>
                    <option value="IBSK1D2">IBSK1D2</option>
                    <option value="Khác">Khác</option>
                </select></td>
            </tr>
            </tr>
                <td><label for="">Giới tính </label></td>
                <td><select id="sex">
                    <option value="">-chọn giới tính  -</option>
                    <option value="Nam">Nam</option>
                    <option value="Nữ">Nữ</option>
                    <option value="Khác">Khác</option>
                </select></td>
            </tr>
            
         </table>
        </div>
       
      
    </form>
   
    <div>
        <button class="btn btn-primary" onclick="getAdd();">Nhập dữ liệu </button>
        
    </div>
            <div id="right">
                <button onclick="search()" class="btn btn-primary">Search</button>
                <input type="text" id="searchItem">
            </div>
            
            <div id="clear"></div>
            <hr>
        
        
        
        <table class="table table-dark table-striped" id="render">
             <tr>
                <th>Mã sinh viên </th>
                <th>Họ và tên </th>
                <th>Lớp</th>
                <th>Giới tính</th>
                <th>Hành động</th>
            </tr>
          </table>
        </div>
        <div id="footer">
          
         
        </div> 
        </body>
        <script>
              var data=[];

               
                    
                      function getAdd(){
                    var item_sex =document.getElementById("sex").value;
                    var item_email =document.getElementById("email").value;
                    var item_id = document.getElementById("id").value;
                    var item_name = document.getElementById("name").value;
                    var item_age = document.getElementById("age").value;
                    var item_class = document.getElementById("class").value;
                    if (item_id==""||item_name==""||item_age==""||item_class==""||item_sex==""||item_email=="") {
                        alert("Thông báo người dùng , số liệu bạn nhập vào không đủ để lưu trữ thông tin");
                        alert("yêu cầu nhập đầy đủ")
                    } else {
                      var obj = {
                        Id :item_id,
                        Name :item_name,
                        Age :item_age,
                        Class : item_class,
                        Email:item_email,
                        Sex : item_sex
                     }
                   
                     let index = data.findIndex((c)=>c.Id==obj.Id)
                     if(index >= 0){
                      data.splice(index,1,obj)
                     } else {
                      data.push(obj)
                     }
                       render()
                       clear()
                    }  
                
                }
               
     

        function render(){
                        table = `<tr>
                                <th>Mã sinh viên</th>
                                <th>Họ và tên</th>
                                <th>Lớp</th>
                                <th>Giới tính</th>
                                <th>Hành động</th>
                                
                            </tr>`
                          
                            for (let i = 0; i < data.length; i++) {
                        table +=  `<tr>
                                <th>${data[i].Id}</th>
                                <th>${data[i].Name}</th>
                                <th>${data[i].Class}</th>
                                <th>${data[i].Sex}</th>
                                <th>
                                    <button class="btn btn-danger" onclick="deleteItem(${data[i].Id})">Delete</button>
                                    <button class="btn btn-warning"onclick="editItem(${data[i].Id})">Edit</button></th>
                                </tr>`
                                
                     }
                   
                     document.getElementById("render").innerHTML=table;
                          }
                   
                          
                    
                     function clear (){
                        document.getElementById("id").value="";
                        document.getElementById("name").value="";
                        document.getElementById("age").value="";
                        document.getElementById("class").value="";
                        document.getElementById("email").value="";
                        document.getElementById("sex").value="";
                       
                     }
                  
                     
                  
                     function deleteItem(x){
                        
                           for (let i = 0; i < data.length; i++) {
                            if (data[i].Id==x) {
                                data.splice(i,1)
                                render()
                            }
                            
                           }
                           alert("xóa thành công");
                        }
                           function editItem(x){
                            alert("bạn có chắc muốn thay đổi thông tin");
                            alert("Lưu ý không được thay đổi mã sinh viên , việc thay đổi 'Mã sinh viên' sẽ tạo ra một học viên mới ");
                           for (let i = 0; i < data.length; i++) {
                                if (data[i].Id==x) {
                                    document.getElementById("id").value=data[i].Id;
                                    document.getElementById("name").value = data[i].Name;
                                    document.getElementById("age").value = data[i].Age;
                                    document.getElementById("class").value = data[i].Class;
                                    document.getElementById("email").value = data[i].Email;
                                    document.getElementById("sex").value = data[i].Sex;
                                
                            }
                          
                           }

                           
      
                           
        }
        function search() {
                    var search = document.getElementById("searchItem").value;
                    var list = this.data;
                     var kq = [];
                 
                         if (search) {
                        for (let i = 0; i < list.length; i++) {
                        var str = list[i].Id;
                      
                      if(str.includes(search)){
                        
                        
                           var itemSearch = {
                            id:list[i].Id,
                            name:list[i].Name,
                            age:list[i].Age,
                            class :list[i].Class,
                            sex : list[i].Sex
                           
                           }
                        kq.push(itemSearch);
                        console.log(kq);
                        if (search == list[i].Id) {
                            alert( "Tên học viên " + list[i].Name + " - " + " mã sinh viên " + list[i].Id + " - " + " độ tuổi " + list[i].Age + " - " + " thuộc lớp " + list[i].Class + " - " + " giới tính " + list[i].Sex  + " - " + " email " + list[i].Email  );
                        } else{
                            alert("Không tìm thấy học viên");
                        }
                          
                          }
                        
                           }
                         }
                        
                        }
</script>
</html>